<template><div><blockquote></blockquote>
<h1 id="cesium粒子特效-烟雾" tabindex="-1"><a class="header-anchor" href="#cesium粒子特效-烟雾" aria-hidden="true">#</a> Cesium粒子特效-烟雾</h1>
<h2 id="一、封装类" tabindex="-1"><a class="header-anchor" href="#一、封装类" aria-hidden="true">#</a> 一、封装类</h2>
<div class="language-javascript line-numbers-mode" data-ext="js"><pre v-pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GasRangeEffect</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">viewer<span class="token punctuation">,</span> lon<span class="token punctuation">,</span> lat</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewer <span class="token operator">=</span> viewer
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewModel <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">emissionRate</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            <span class="token literal-property property">gravity</span><span class="token operator">:</span> <span class="token number">2.0</span><span class="token punctuation">,</span><span class="token comment">//设置重力参数</span>
            <span class="token literal-property property">minimumParticleLife</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">maximumParticleLife</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
            <span class="token literal-property property">minimumSpeed</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span><span class="token comment">//粒子发射的最小速度</span>
            <span class="token literal-property property">maximumSpeed</span><span class="token operator">:</span> <span class="token number">4.0</span><span class="token punctuation">,</span><span class="token comment">//粒子发射的最大速度</span>
            <span class="token literal-property property">startScale</span><span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">endScale</span><span class="token operator">:</span> <span class="token number">80.0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">particleSize</span><span class="token operator">:</span> <span class="token number">290.0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>emitterModelMatrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>translation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rotation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Quaternion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hpr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>HeadingPitchRoll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>trs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TranslationRotationScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>scene <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>scene
        <span class="token keyword">this</span><span class="token punctuation">.</span>particleSystem <span class="token operator">=</span> <span class="token string">''</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>entity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"gasRangeEffect"</span><span class="token punctuation">,</span>
            <span class="token comment">//选择粒子放置的坐标</span>
            <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span>
                lon<span class="token punctuation">,</span>
                lat
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>shouldAnimate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// this.viewer.scene.globe.depthTestAgainstTerrain = false;</span>
        <span class="token comment">// this.viewer.trackedEntity = this.entity;</span>
        <span class="token keyword">var</span> particleSystem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ParticleSystem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../assets/images/smoke.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//生成所需粒子的图片路径</span>
                <span class="token comment">//粒子在生命周期开始时的颜色</span>
                <span class="token literal-property property">startColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">GREENYELLOW</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">//粒子在生命周期结束时的颜色</span>
                <span class="token literal-property property">endColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">GREENYELLOW</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">//粒子在生命周期开始时初始比例</span>
                <span class="token literal-property property">startScale</span><span class="token operator">:</span> _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>startScale<span class="token punctuation">,</span>
                <span class="token comment">//粒子在生命周期结束时比例</span>
                <span class="token literal-property property">endScale</span><span class="token operator">:</span> _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>endScale<span class="token punctuation">,</span>
                <span class="token comment">//粒子发射的最小速度</span>
                <span class="token literal-property property">minimumParticleLife</span><span class="token operator">:</span> _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>minimumParticleLife<span class="token punctuation">,</span>
                <span class="token comment">//粒子发射的最大速度</span>
                <span class="token literal-property property">maximumParticleLife</span><span class="token operator">:</span> _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>maximumParticleLife<span class="token punctuation">,</span>
                <span class="token comment">//粒子质量的最小界限</span>
                <span class="token literal-property property">minimumSpeed</span><span class="token operator">:</span> _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>minimumSpeed<span class="token punctuation">,</span>
                <span class="token comment">//粒子质量的最大界限</span>
                <span class="token literal-property property">maximumSpeed</span><span class="token operator">:</span> _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>maximumSpeed<span class="token punctuation">,</span>
                <span class="token comment">//以像素为单位缩放粒子图像尺寸</span>
                <span class="token literal-property property">imageSize</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span>
                    _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>particleSize<span class="token punctuation">,</span>
                    _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>particleSize
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">//每秒发射的粒子数</span>
                <span class="token literal-property property">emissionRate</span><span class="token operator">:</span> _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>emissionRate<span class="token punctuation">,</span>
                <span class="token literal-property property">bursts</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token comment">// these burst will occasionally sync to create a multicolored effect</span>
                    <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ParticleBurst</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token number">5.0</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">minimum</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">maximum</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ParticleBurst</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token number">10.0</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">minimum</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">maximum</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ParticleBurst</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token number">15.0</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">minimum</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">maximum</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token comment">//粒子系统发射粒子的时间（秒）</span>
                <span class="token literal-property property">lifetime</span><span class="token operator">:</span> <span class="token number">16.0</span><span class="token punctuation">,</span>
                <span class="token comment">//粒子系统是否应该在完成时循环其爆发</span>
                <span class="token literal-property property">loop</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">//设置粒子的大小是否以米或像素为单位</span>
                <span class="token literal-property property">sizeInMeters</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">//系统的粒子发射器</span>
                <span class="token literal-property property">emitter</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ConeEmitter</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">45.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//BoxEmitter 盒形发射器，ConeEmitter 锥形发射器，SphereEmitter 球形发射器，CircleEmitter圆形发射器</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>particleSystem <span class="token operator">=</span> particleSystem<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preUpdateEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//场景渲染事件</span>
    <span class="token function">preUpdateEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>preUpdate<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">scene<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//发射器地理位置</span>
            _this<span class="token punctuation">.</span>particleSystem<span class="token punctuation">.</span>modelMatrix <span class="token operator">=</span> _this<span class="token punctuation">.</span><span class="token function">computeModelMatrix</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>entity<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//发射器局部位置</span>
            _this<span class="token punctuation">.</span>particleSystem<span class="token punctuation">.</span>emitterModelMatrix <span class="token operator">=</span> _this<span class="token punctuation">.</span><span class="token function">computeEmitterModelMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 将发射器旋转</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>spin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>heading <span class="token operator">+=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
                _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>pitch <span class="token operator">+=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
                _this<span class="token punctuation">.</span>viewModel<span class="token punctuation">.</span>roll <span class="token operator">+=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">computeModelMatrix</span><span class="token punctuation">(</span><span class="token parameter">entity<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> entity<span class="token punctuation">.</span><span class="token function">computeModelMatrix</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">computeEmitterModelMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hpr <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>HeadingPitchRoll<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hpr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>trs<span class="token punctuation">.</span>translation <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromElements</span><span class="token punctuation">(</span>
            <span class="token operator">-</span><span class="token number">4.0</span><span class="token punctuation">,</span>
            <span class="token number">0.0</span><span class="token punctuation">,</span>
            <span class="token number">1.4</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>translation
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>trs<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Quaternion<span class="token punctuation">.</span><span class="token function">fromHeadingPitchRoll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hpr<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> Cesium<span class="token punctuation">.</span>Matrix4<span class="token punctuation">.</span><span class="token function">fromTranslationRotationScale</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>trs<span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>emitterModelMatrix
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">removeEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>preUpdate<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>preUpdateEvent<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>emitterModelMatrix <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>translation <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rotation <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hpr <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>trs <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//移除粒子特效</span>
    <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//清除事件</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>particleSystem<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除粒子对象</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除entity</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//显隐粒子特效</span>
    <span class="token function">hideShowGasEffect</span><span class="token punctuation">(</span><span class="token parameter">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span>values<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"gasRangeEffect"</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span>show <span class="token operator">=</span> bool<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bool<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>particleSystem<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除粒子对象</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            _this<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、调用" tabindex="-1"><a class="header-anchor" href="#二、调用" aria-hidden="true">#</a> 二、调用</h2>
<div class="language-javascript line-numbers-mode" data-ext="js"><pre v-pre class="language-javascript"><code>
<span class="token keyword">let</span> gasRangeEffect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GasRangeEffect</span><span class="token punctuation">(</span>viewer<span class="token punctuation">,</span> lon<span class="token punctuation">,</span> lat<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


